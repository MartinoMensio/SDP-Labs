https://github.com/shradhash/implementing-semaphores-in-xv6/blob/master/proc.c